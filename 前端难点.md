# 封装



### 路由守卫

### axios 拦截器

请求之前可以给数据进行加密发给后端，也可以给后端发来的加密数据解密

```vue
// 添加请求拦截器
axios.interceptors.request.use(function (config) {
    // 在发送请求之前做些什么
    return config;
  }, function (error) {
    // 对请求错误做些什么
    return Promise.reject(error);
  });

// 添加响应拦截器
axios.interceptors.response.use(function (response) {
    // 2xx 范围内的状态码都会触发该函数。
    // 对响应数据做点什么
    return response ;
  }, function (error) {
    // 超出 2xx 范围的状态码都会触发该函数。
    // 对响应错误做点什么
    return Promise.reject(error);
  });
```



### 优化axios 的url路径

1.创建tools和http.js

```vue
const instance = axios.create({  
baseURL: 'https://some-domain.com/api/',  
   // `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。
  // 它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL
timeout: 1000,  
headers: {'X-Custom-Header': 'foobar'} });
```

2.在main.js引入

![image-20230219101125182](C:\Users\wedo\AppData\Roaming\Typora\typora-user-images\image-20230219101125182.png)

3.在组件中使用

![image-20230219101631220](C:\Users\wedo\AppData\Roaming\Typora\typora-user-images\image-20230219101631220.png)

## 数组拼接

##### this.goodsList = this.goodsList.concat(res.data.data.list)

#### ES9的写法

##### this.goodsList  = [...this.goodsList, ...res.data.data.list]



```vue
methods: {
    loadMore() {
      console.log('加载更多数据，分页')
      this.page++
  axios({
     url: `http://localhost:8081/wx/goods/list?page=${this.page}&limit=${this.limit} `  
//es6中也可以采用${XXX}来在字符串中插入变量（这个记住要利用v-bind）
  }).then(res => {
    if (res.data.data.list.length < this.limit) {
      console.log('没有更多数据了')
      this.hasNextPage = true
    }
    // 数组拼接 ES9
    this.goodsList = [...this.goodsList, ...res.data.data.list]
  }).finally(() => {
    this.loading = false
  })
   }
 }
```




.sync修饰符可以实现子组件与父组件的双向绑定，并且可以实现子组件同步修改父组件的值。

 节流   

防抖

### 移动电商一级分类

```vue
 this.$http({
      url: '/catalog/index'
    }).then(res => {
      const items = res.data.categoryList.map(item => ({
        id: item.id,
        text: item.name,
      })) 
items[0].children = res.data.currentSubCategory.map(item => ({
    id: item.id,
    text: item.name
  }))
  this.categoryItems = items
  console.log(items)
})
```

获取配置文件信息，

![image-20230220211823536](C:\Users\wedo\AppData\Roaming\Typora\typora-user-images\image-20230220211823536.png)

### 路由传参分为 params 传参与 query 传参

params 传参类似于网络请求中的 post 请求，params 传过去的参数不会显示在地址栏中（但是不能刷新）。params 只能配合 name 使用，如果提供了 path，params 会失效。

query 传参类似于网络请求中的 get 请求，query 传过去的参数会拼接在地址栏中（?name=xx）。query 较为灵活既可以配合 path 使用，也能配合 name 使用（亲测可用）。



传参数

```vue
this.$router.push({
   name:'',
   params:{
     id
   }
})
```

获取动态id

```vue
this.$route.params.id
```

### 纯前端数据筛选

```vue
computed:{
  filterMethodName(){
    return this.goodslist.filter(item => item.name.includes(this.search))
  }
}
```



v-html 渲染 html 字符串

ele.innerHTML

{{ }}  & v-text:    ele.textContent

background: center / cover url("../assets/login-bg.webp") no-repeat ;

object-fit: cover

```vue
  //去掉九宫格边框
.van-grid-item__content::after{
  border-width: 0  !important;  
}
```

### git提交

$ 仓库地址

$  cd  创建的文件夹

把要提交的文件拖入创建的文件夹

$ git add .

$ git commit -m "注释"

$ git status

$ git push
